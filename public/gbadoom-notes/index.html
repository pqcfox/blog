<!DOCTYPE html>
<html lang="en">

<head>
    <title>embedded doom part 1: analyzing gbadoom | kat&#x27;s notes</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://pqcfox.dev/style.css">
    <link rel="stylesheet" href="https://pqcfox.dev/color/orange.css">
<link rel="stylesheet" href="https://pqcfox.dev/font-iosevka.scss">


    <meta name="description" content="">

    <meta property="og:description" content="">
    <meta property="og:title" content="embedded doom part 1: analyzing gbadoom | kat's notes">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://pqcfox.dev/gbadoom-notes/">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="">
    <meta name="twitter:title" content="embedded doom part 1: analyzing gbadoom | kat's notes">
    <meta property="twitter:domain" content="pqcfox.dev">
    <meta property="twitter:url" content="https://pqcfox.dev/gbadoom-notes/">

                <link rel="alternate" type="application/rss+xml" title="kat&#x27;s notes RSS Feed" href="https://pqcfox.dev/rss.xml" />
                <link rel="alternate" type="application/atom+xml" title="kat&#x27;s notes Atom Feed" href="https://pqcfox.dev/atom.xml" />
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
    
    </head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="https://pqcfox.dev" style="text-decoration: none;">
                    <div class="logo">
                      
                            &#x2F;&#x2F; kat&#x27;s notes &#x2F;&#x2F;
                        
                    </div>
                </a>
            </div>
        </div>

        
        
                <nav class="menu">
            <ul class="menu__inner">
                <li class="active"><a href="https://pqcfox.dev">blog</a></li>
            
                <li><a href="https://pqcfox.dev/tags">tags</a></li>
            
                <li><a href="https://pqcfox.dev/archive">archive</a></li>
            
                <li><a href="https://pqcfox.dev/about">about</a></li>
            
                <li><a href="https://github.com/pqcfox" target="_blank" rel="noopener noreferrer">github</a></li>
            
                <li><a href="https://linkedin.com/in/katiewat" target="_blank" rel="noopener noreferrer">linkedin</a></li>
            </ul>
        </nav>
    
    
        
    </header>
    

    <div class="content">
        
    <div class="post">
        
    <h1 class="post-title"><a href="https://pqcfox.dev/gbadoom-notes/">embedded doom part 1: analyzing gbadoom</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2024-10-09
        </span>

    </div>

    
        <span class="post-tags-inline">
                :: tags:&nbsp;
                <a class="post-tag" href="https://pqcfox.dev/tags/doom/">#doom</a>&nbsp;
                <a class="post-tag" href="https://pqcfox.dev/tags/software/">#software</a></span>
    

        <div class="post-content">
            <p>welcome back!</p>
<p>as foreshadowed, an article on doom. why? because i want to make an embedded doom port for a gag project and realized i have no idea how to do that. ^^;</p>
<p>plus, doom is essentially the <a href="https://en.wikipedia.org/wiki/Caenorhabditis_elegans">c. elegans</a> of the software world: well-documented and simple enough to understand in parts, but complex and interesting enough to study in various ways. you can learn a lot about software development by studying the doom source.</p>
<p>so, we're going to study <a href="https://github.com/doomhack/GBADoom">gbadoom</a>, a port of doom to the <a href="https://en.wikipedia.org/wiki/Game_Boy_Advance">nintendo game boy advance</a>. (bear with me, i promise i'll get to why.)</p>
<h3 id="the-challenge-of-embedded-doom">/// the challenge of embedded doom ///</h3>
<p>doom was released by <a href="https://en.wikipedia.org/wiki/Id_Software">id software</a> and had the following <a href="https://www.reddit.com/r/gaming/comments/a4yi5t/original_doom_system_requirements_from_my_25_year/">minimum requirements</a>:</p>
<ul>
<li>"IBM or compatible 386 or better"</li>
<li>4MB RAM</li>
<li>VGA graphics card</li>
<li>Hard disk drive</li>
</ul>
<p>doom is still renowned today for being <em>insanely</em> portable due to low system requirements and careful modular design. notably, because the i486's <a href="https://en.wikipedia.org/wiki/Floating-point_unit">fpu</a> was too slow for use in doom, the codebase even includes a purpose-built fixed-point arithmetic library used for all of the rendering calculations, meaning it's particularly amenable to running on microcontrollers...</p>
<p>...<em>except for that whole "4MB" of RAM thing.</em> that's what we need to work around. but how?</p>
<h3 id="existing-ports">/// existing ports ///</h3>
<p>there have been several remarkable embedded ports of doom in just the last decade. here's a highlight of some:</p>
<table><thead><tr><th><em>port</em></th><th><em>device</em></th><th><em>processor</em></th><th><em>ram</em></th><th><em>writeup</em></th></tr></thead><tbody>
<tr><td><a href="https://github.com/floppes/stm32doom">stm32doom</a></td><td>stm32f429i-disc1</td><td>arm cortex-m4</td><td><strong>256KB</strong></td><td>none</td></tr>
<tr><td><a href="https://github.com/doomhack/PsionDoom">psion-doom</a></td><td>epoc r5 pdas</td><td>cl-ps7110</td><td><strong>8MB</strong></td><td>none</td></tr>
<tr><td><a href="https://github.com/doomhack/GBADoom">gbadoom</a></td><td>gameboy advance</td><td>arm7tdmi</td><td><strong>32KB</strong></td><td>none</td></tr>
<tr><td><a href="https://github.com/ghidraninja/game-and-watch-doom">game-and-watch-doom</a></td><td>game and watch</td><td>arm cortex-m7</td><td><strong>1.4MB</strong></td><td><a href="https://www.youtube.com/watch?v=sNg_S9UM5ps">video</a></td></tr>
<tr><td><a href="https://github.com/marciopocebon/MG21DOOM">mg21doom</a></td><td>ikea trådfri lamp</td><td>arm cortex-m33</td><td><strong>108KB</strong></td><td>none</td></tr>
<tr><td><a href="https://github.com/turtiustrek/magiclantern_doom">magiclantern-doom</a></td><td>eos 200d camera</td><td>arm946e-s</td><td>???</td><td>none</td></tr>
<tr><td><a href="https://github.com/NordicPlayground/nrf-doom">nrfdoom</a></td><td>nrf5340</td><td>arm cortex-m33</td><td><strong>512KB</strong></td><td><a href="https://devzone.nordicsemi.com/nordic/nordic-blog/b/blog/posts/doom-on-nrf5340">blog</a></td></tr>
<tr><td><a href="https://github.com/next-hack/nRF52840Doom">nrf52840doom</a></td><td>nrf52840</td><td>arm cortex-m4</td><td><strong>256KB</strong></td><td><a href="https://next-hack.com/index.php/2021/11/13/porting-doom-to-an-nrf52840-based-usb-bluetooth-le-dongle/">blog</a></td></tr>
<tr><td><a href="https://kilograham.github.io/rp2040-doom/">rp2040-doom</a></td><td>nrf52840</td><td>arm cortex-m0+</td><td><strong>264KB</strong></td><td><a href="https://kilograham.github.io/rp2040-doom/">article</a></td></tr>
</tbody></table>
<p>you might note that there's a couple outliers in the ram column. 108KB? 32KB?? how do you get a game like doom down from 4MB to just 32KB?</p>
<h3 id="disecting-gbadoom">/// disecting gbadoom ///</h3>
<p>the <em>really</em> low-memory ports above all seem to share a common ancestry: they tend to be based on <strong>gbadoom</strong>, which in turn was based on <a href="https://prboom.sourceforge.net/">prBoom</a>, a well-loved port of doom emphasizing code quality and bug fixes while maintaining the original spirit of the game.</p>
<p>to see what steps <strong>gbadoom</strong> took to go from a fully-featured desktop port of doom down to one that would fit on a gameboy, the best route is the git history.</p>
<blockquote>
<p><em>aside:</em> reading the git history of projects is an <em>exceptionally</em> underrated way of learning how to do new things. want to write an os? look at how linux started. want to write a compiler? look at what rustc grew from.</p>
</blockquote>
<p>...</p>

        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h">read more?</span>
                    <hr />
                </div>
                <div class="pagination__buttons">
                        <span class="button previous">
                            <a href="https://pqcfox.dev/initial-commit/">
                                <span class="button__icon">←</span>&nbsp;
                                <span class="button__text">git commit -m &quot;initial commit&quot;</span>
                            </a>
                        </span>
                    
                    </div>
            </div>
        
    </div>

    </div>

    
    <footer class="footer">
        <div class="footer__inner">
                <div class="copyright">
                        <span>© 
    2024
 Powered by <a href="https://www.getzola.org/">Zola</a></span>
                    <span class="copyright-theme">
                        <span class="copyright-theme-sep">:: </span>
                        Theme: <a href="https://github.com/pawroman/zola-theme-terminimal/">Terminimal</a> by pawroman
                    </span>
                </div>
            </div>
    </footer>
    

</div>
</body>

</html>
